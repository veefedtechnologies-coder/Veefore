# ğŸ§  STAGE 2: Vision-to-Design Match (Style AI + Trending Sync)

### What it does:
- Scrapes top 50â€“100 trending thumbnails from YouTube + Instagram
- Extracts both visual features and title context
- Uses CLIP/BLIP to embed both visual and text together
- Compares user videoâ€™s content to this â€œstyle vectorâ€ to:
  - Match high-performing thumbnails
  - Suggest trending layout patterns
  - Suggest badge style, emoji, shadow, stroke, filter combos

### Stack:
- Puppeteer for scraping (or YouTube Data API)
- OpenAI CLIP or BLIP-2 model for similarity
- Store vectors in vector DB (Pinecone/Weaviate)
- Match input title + image to best design archetypes

### Output:
```json
{
  "matched_trend_thumbnail": "https://yt.com/trend123.jpg",
  "layout_style": "Z-pattern-left-face",
  "visual_motif": "zoomed face + glow + red stroke",
  "emoji": ["ğŸ”¥", "ğŸ˜±"],
  "filters": ["vibrance", "warm_tone"]
}
```

Feed this into canvas generator for AI-based visual composition.

---

## ğŸ§‘â€ğŸ¨ STAGE 3: Layout & Variant Generator

### Logic:
- Combine GPT metadata + visual sync data
- Generate 3â€“5 variants using mixed layouts:
  - Face focus left, text right
  - Bold title on top, blurred face BG
  - CTA badge bottom-right
  - Overlay emojis in corners
- Mix font & color styles from prompt

### Rendering Tools:
- Use Node.js `canvas`, or `sharp` for image composition
- Ensure 1280x720px resolution
- Use AI to balance spacing, shadows, padding, emoji size

### Each Variant Includes:
- PNG preview
- Editable layer metadata (JSON)
- Layout classification (e.g. â€œHigh CTR â€“ Emotion + Redâ€) 
- Predicted CTR score (if model trained)

---

## ğŸ›ï¸ STAGE 4: Variant Selector & Preview Gallery

### Gallery Layout:
- Grid or Carousel showing 3â€“5 variants
- Each preview includes:
  - Title: â€œFace Right â€“ Badge Topâ€
  - CTR prediction score bar
  - Buttons:
    - â€œEdit This Variantâ€ (open in canvas)
    - â€œUse As Isâ€ (direct download)

---

## ğŸ¨ STAGE 5: Canvas Editor (Drag & Drop)

### UI Framework:
- `fabric.js` or `konva.js`
- Fixed canvas at 1280x720 (YouTube default)

### Canvas Layers:
- âœ… Background Image
- âœ… Enhanced Face Cutout (glow, outline, eye alignment)
- âœ… Title Text Block
- âœ… CTA Badge (emoji, shape, color)
- âœ… Emojis and Filters

### Sidebar Panel Features:
- Font picker (Google Fonts)
- Color adjustment
- Emoji library (organized by mood)
- Layout switcher (preset buttons)
- Outline toggle / shadow sliders
- AI button: â€œImprove Designâ€ (refines spacing)

---

## ğŸ“¤ STAGE 6: Export & Save

### Export Formats:
- PNG 1280x720
- PNG transparent
- Instagram 1080x1080
- JSON (layout metadata)

### Export Destinations:
- User download
- Save to S3 or Cloudinary
- Save in user workspace (project-level)

---

## ğŸ§  AI/Model Stack Overview

| Task                        | Tool/API                     |
|-----------------------------|------------------------------|
| Prompt Suggestions          | OpenAI GPT-4                 |
| Trending Scraper            | Puppeteer + YouTube API      |
| Visual Matching             | OpenAI CLIP / BLIP-2         |
| Image Composition           | Node Canvas / Sharp          |
| Face Enhancement            | GFPGAN / CodeFormer          |
| Face Pose Detection         | FaceAPI.js + Eye Gaze Adjust |
| Canvas Editor               | Fabric.js / Konva.js         |
| CTR Scoring (Optional)      | Mini ML Model + CLIP Match   |
| Storage & Export            | AWS S3 / Cloudinary          |

---

## ğŸ”® STAGE 7: Advanced, Professional Features

- ğŸ”¥ **Style Matching AI**: Uses vision-language embedding to copy top styles
- ğŸ§  **Pose Correction**: Adjusts head tilt and gaze to be centered
- ğŸ¯ **Emotion-Based Layout Rules**:
  - SHOCK = red, zoomed, big emoji
  - LUXURY = serif, black/gold, no emojis
- ğŸª„ **One-Click Improve**: Uses GPT-4 + layout metadata to suggest visual fix
- ğŸ“Š **CTR Predictor**: Predicts click rate based on similarity to top designs
- ğŸ“ˆ **Trending Layout Sync**: Re-scrapes and re-ranks layout templates daily
- ğŸ¨ **Hook Word/Emoji Suggestions**: GPT-powered hook engine
- ğŸ” **Versioning & Collaboration**: Edit history + teammate invite